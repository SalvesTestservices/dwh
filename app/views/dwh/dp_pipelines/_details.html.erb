<%= turbo_frame_tag dom_id(dp_pipeline) do %>
  <% decorate dp_pipeline do |decorates| %>    
    <div class="bg-white -mx-4 px-4 py-8 shadow-sm ring-1 ring-gray-900/5 sm:mx-0 sm:rounded-lg sm:px-8 sm:pb-4 mb-3 border-l-8 <%= decorates.status %>">
      <div class="flex flex-row justify-between">
        <div class="flex flex-col w-6/12">
          <h2 class="text-2xl font-semibold leading-6 text-gray-900"><%= dp_pipeline.name %></h2>
          <div class="mt-2">
            <dt class="inline text-gray-500"><%= dp_pipeline.description %></dt>
          </div>
        </div>
        <div class="w-3/12 flex flex-row justify-center mt-2">
          <% unless @dp_runs.blank? %>
            <%= render "dw/dp_runs/quality_checks_overall", size: "medium", dp_run: @dp_runs.first, dp_quality_checks: @dp_runs.first.dp_quality_checks %>
          <% end %>
        </div>
        <div class="w-3/12 flex flex-row justify-end h-10 mt-3">
          <%= render(View::ButtonComponent.new(title: I18n.t(".general.edit"), url: edit_dwh_dp_pipeline_path(dp_pipeline), button_type: "link", size: "medium")) %>
        </div>
      </div>
      <dl class="mt-1 grid grid-cols-4 text-sm leading-6 w-full">
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.pipeline_key') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.pipeline_key) %></dd>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.month') %></dt>
          <dd class="mt-2 text-gray-500 text-center">
            <% if dp_pipeline.month.blank? %>
              <%= "-" %>
            <% else %>
              <%= decorates.data_field(I18n.t("date.month_names")[dp_pipeline.month].capitalize) %></dd>
            <% end %>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.year') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.year) %></dd>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.scoped_user_id') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.scoped_user_id) %></dd>
        </div>
      </dl>
      <dl class="mt-1 grid grid-cols-4 text-sm leading-6 w-full">
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.account_ids') %></dt>
          <dd class="flex flex-col items-center mt-2">
            <% accounts.each do |account| %>
              <div class="w-28 rounded mb-2 px-1 text-xs text-center font-medium bg-sky-100 text-sky-700 border border-sky-700"><%= account.name %></div>
            <% end %>
          </dd>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.frequency') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.frequency) %></dd>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.dp_runs_count') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.dp_runs_count) %></dd>
        </div>
        <div class="mt-6 border-t border-gray-200 pt-6 sm:pr-4">
          <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.dp_tasks_count') %></dt>
          <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(dp_pipeline.dp_tasks_count) %></dd>
        </div>
      </dl>
      <div class="mt-6 flex flex-row justify-between w-full border-t border-gray-200 p-5">
        <%= decorates.progress("large") %>
      </div>
    </div>
  <% end %>
<% end %>