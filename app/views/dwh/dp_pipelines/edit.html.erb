<%= turbo_frame_tag dom_id(@dp_pipeline) do %>
  <% decorate @dp_pipeline do |decorates| %>
    <%= form_with(model: @dp_pipeline, data: { turbo: false }) do |form| %>
      <%= render "shared/error_messages", resource: @dp_pipeline %>

      <div class="bg-white -mx-4 px-4 py-8 shadow-sm ring-1 ring-gray-900/5 sm:mx-0 sm:rounded-lg sm:px-8 sm:pb-4 mb-3 border-l-8 <%= decorates.status %>">
        <div class="flex flex-row justify-between">
          <div class="w-6/12">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.name') %></div>
            <%= form.text_field :name, autofocus: true, class: "bg-gray-100 w-11/12 block text-sm text-gray-800 p-1 border-gray-300 rounded focus:ring-gray-500 focus:border-gray-500" %>
          </div>
          <div class="w-4/12">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.pipeline_key') %></div>
            <%= form.text_field :pipeline_key, class: "bg-gray-100 w-11/12 block text-sm text-gray-800 p-1 border-gray-300 rounded focus:ring-gray-500 focus:border-gray-500" %>
          </div>
          <div class="w-2/12">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.scoped_user_id') %></div>
            <%= form.text_field :scoped_user_id, class: "bg-gray-100 w-11/12 block text-sm text-gray-800 p-1 border-gray-300 rounded focus:ring-gray-500 focus:border-gray-500" %>
          </div>
        </div>
        <dl class="mt-6 grid grid-cols-5 text-sm leading-6">
          <div class="col-span-3">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.description') %></div>
            <%= form.text_field :description, class: "bg-gray-100 w-full block text-sm text-gray-800 p-1 border-gray-300 rounded focus:ring-gray-500 focus:border-gray-500" %>
          </div>
          <div class="px-2">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.month') %></div>
            <%= form.select :month, options_for_select([['Januari', '1'],['Februari', '2'],['Maart', '3'],['April', '4'],['Mei', '5'],['Juni', '6'],['Juli', '7'],['Augustus', '8'],['September', '9'],['Oktober', '10'],['November', '11'],['December', '12']], @dp_pipeline.month), { include_blank: true, prompt: "- #{I18n.t('.general.month').downcase} -" }, { class: "block w-full rounded border-gray-300 bg-gray-100 p-1 text-sm focus:border-gray-500 focus:outline-none focus:ring-gray-500 sm:text-sm" } %>
          </div>
          <div class="px-2">
            <div class="font-semibold text-gray-900 text-left text-sm mb-1"><%= I18n.t('.dp_pipeline.form.year') %></div>
            <%= form.select :year, options_for_select(@years, @dp_pipeline.year), {include_blank: true, prompt: "- #{I18n.t('.general.year').downcase} -" }, { class: "block w-full rounded border-gray-300 bg-gray-100 p-1 text-sm focus:border-gray-500 focus:outline-none focus:ring-gray-500 sm:text-sm" } %>
          </div>
          <div class="mt-5 sm:pr-4">
            <dt class="font-semibold text-gray-900 text-left"><%= I18n.t('.dp_pipeline.form.account_ids') %></dt>
            <dd class="flex flex-col items-start mt-2">
              <%= form.collection_check_boxes :account_ids, @accounts, :id, :name do |b| %>
                <div class="flex items-center">
                  <%= b.check_box class: "form-checkbox h-4 w-4 text-gray-700 transition duration-150 ease-in-out", checked: @dp_pipeline.account_ids.include?(b.object.id.to_s) %>
                  <%= b.label class: "ml-2 block text-sm leading-5 text-gray-700" %>
                </div>
              <% end %>
            </dd>
          </div>
          <div class="mt-5 sm:pr-4">
            <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.status') %></dt>
            <dd class="mt-2 flex flex-row justify-center">
              <% collection = [['active', I18n.t('.dp_pipeline.states.active')],['inactive', I18n.t('.dp_pipeline.states.inactive')]] %>
              <%= form.collection_select :status, collection, :first, :last, { include_blank: true }, { class: 'block w-1/2 rounded border-gray-300 bg-gray-100 p-1 text-sm focus:border-gray-500 focus:outline-none focus:ring-gray-500 sm:text-sm' } %>
            </dd>
          </div>
          <div class="mt-5 sm:pr-4">
            <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.frequency') %></dt>
            <dd class="mt-2 flex flex-row justify-center">
              <%= form.text_field :frequency, class: "bg-gray-100 w-10 block text-xs text-gray-800 p-1 border-gray-300 rounded focus:ring-gray-500 focus:border-gray-500" %>
            </dd>
          </div>
          <div class="mt-5 sm:pr-4">
            <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.dp_runs_count') %></dt>
            <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(@dp_pipeline.dp_runs_count) %></dd>
          </div>
          <div class="mt-5 sm:pr-4">
            <dt class="font-semibold text-gray-900 text-center"><%= I18n.t('.dp_pipeline.form.dp_tasks_count') %></dt>
            <dd class="mt-2 text-gray-500 text-center"><%= decorates.data_field(@dp_pipeline.dp_tasks_count) %></dd>
          </div>
          <div class="w-full flex flex-row justify-start mt-3">
            <%= render(View::ButtonComponent.new(title: I18n.t(".general.save"), url: dwh_dp_pipelines_path, button_type: "button", size: "medium")) %>
            <%= link_to I18n.t(".general.cancel"), dwh_dp_pipeline_path(@dp_pipeline), class: "text-primary hover:underline pt-2 pl-2" %>
          </div>
        </dl>
      </div>
    <% end %>
  <% end %>
<% end %>